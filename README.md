# Локальный интерфейс для анализа панельных данных

Простой пример Streamlit-приложения, которое загружает панельные данные по вузам, фильтрует их по категориям и строит интерактивные графики.

## Обоснование выбора инструментов
- **Streamlit** — минималистичный и быстрый для сборки локальных аналитических UI без лишнего фронтенда.
- **pandas** — базовая обработка табличных данных, агрегации и фильтры.
- **Plotly Express** — интерактивные графики (линейные, bar/box/scatter) с подписью осей и легенд.

## Архитектура и структура
```
├── app
│   ├── data_loader.py   # загрузка CSV/Parquet, список категориальных полей
│   ├── plots.py         # функции построения динамики и статики на Plotly
│   └── processing.py    # фильтрация, агрегация, выбор периода/года
├── data
│   └── sample_panel.csv # демонстрационный набор данных
├── streamlit_app.py     # точка входа Streamlit
├── requirements.txt     # зависимости приложения
└── README.md            # это описание
```

Модули разделены по назначению (загрузка, обработка, визуализация), что упрощает расширение и тестирование.

## Запуск
1. Установите зависимости: `pip install -r requirements.txt`
2. Запустите локально: `streamlit run streamlit_app.py`
3. По умолчанию используется файл `data/sample_panel.csv`. Можно загрузить свой CSV/Parquet через сайдбар.

## Использование интерфейса
- **Период:** выберите один год или диапазон лет ползунком.
- **Показатель:** выбор по `variable_code` с отображением описания.
- **Фильтры:** комбинируйте категориальные признаки (тип вуза, профиль, округ, регион, ведомство).
- **Агрегация:** по выбранной категории (mean/median/sum) с автоматической легендой.
- **Визуализация:**
  - вкладка «Динамика» — линейный график по годам.
  - вкладка «Статика» — bar/box/scatter для выбранного года.
- Внизу отображается таблица отфильтрованных наблюдений и их количество.

## Как расширять
- **Новые категории:** добавьте названия столбцов в `CATEGORY_COLUMNS` модуля `app/data_loader.py`.
- **Новые метрики агрегации:** расширьте список `agg_method` в `streamlit_app.py` и при необходимости опишите кастомную функцию в `app/processing.py`.
- **Новые типы графиков:** добавьте ветку в `static_chart` или новую функцию в `app/plots.py`, вызывая её из `streamlit_app.py`.
- **Источники данных:** замените загрузку на чтение из нескольких файлов или БД в `load_panel_data`.

Приложение рассчитано на локальный запуск и не требует внешних API.
